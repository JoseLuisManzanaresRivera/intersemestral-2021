---
title: "Sesión 5 Reportes en R Markdown"
author: "JLMR"
date: 2021-01-18T21:13:15-05:00
output: html_document
---



<p>###¿Por qué R Markdown para un reporte académico?</p>
<p>R Markdown (un entorno de trabajo RTF -rich text format-).
Nos permite integrar el código de las estimaciones directamente al análisis, lo que hace el flujo de trabajo un proceso integrado.</p>
<p>Diversos <a href="https://rmarkdown.rstudio.com/gallery.html">formatos</a> de representación incluido HTLM o PDF inlcuso word.</p>
<p>Integración con otras plataformas <em>open source</em> para el seguimiento de repositorios en línea. Por ejemplo: <a href="https://guides.github.com/activities/hello-world/">github</a></p>
<p>Esta integración nos permite una diversidad de actividades. Para nuestro propósito en la maestría una capacidad útil a partir de la integración de <strong>R</strong> y <strong>github</strong> es la creción de sitios web ara la presentación de nuestros proyectos de investigación. (por ejemplo usando <strong>blogdown</strong>).</p>
<p><strong>Ejemplo</strong> Generación de reporte en R Markdown en formato <strong>HTML</strong>.</p>
<div id="flujo-de-trabajo-recomendado" class="section level6">
<h6>Flujo de trabajo recomendado:</h6>
<ul>
<li>Crear un archivo R Markdown</li>
<li>Incluir el texto introductorio</li>
<li>incluir secciones de código.</li>
<li>compilar en formato HTLM usando Knit.</li>
</ul>
</div>
<div id="ejercicio.-determinación-de-cociente-del-localización-lq." class="section level4">
<h4>Ejercicio. Determinación de Cociente del localización (LQ).</h4>
<div id="contexto-del-análisis" class="section level5">
<h5>Contexto del análisis:</h5>
<p>Con el objetivo de evaluar la intensidad del uso de los recursos hídricos subterráneos los analistas de CONAGUA región Chihuahua, desean indagar la concentración de pozos registrados en la entidad por acuífero. Así como determinar la distribución de los volumenes consesionados de agua subterranea en los acuiferos de la entidad.</p>
<p>Genere un reporte con estadísticas descriptivas incluya la visualización de la disctribucion de los datos para la variable <strong>volumen concesionado por acuífero</strong>, así como las herramientas de visualización que considere necesarias para explicar el fenómeno de estudio (ej mapas, puede usar Qgis, Arcview, etc).</p>
<p>Para determinar el grado de concentración del problema a escala territorial (por acuífero) estime el Cociente de localización (LQ) para el número de concesiones para extracción de aguas subterránea por <span class="math inline">\(km^2\)</span>.</p>
<p><strong>Estructura del reporte:</strong> Introducción del tema (motivación, justificación, importancia). Metodología y Datos. Análisis y resultados, discusión, conclusiones.
Máximo 1000 palabras.</p>
<pre class="r"><code>library(foreign)
library(tidyverse)</code></pre>
<pre><code>## Warning: package &#39;tidyverse&#39; was built under R version 3.5.3</code></pre>
<pre><code>## -- Attaching packages -------------------------------------------- tidyverse 1.3.0 --</code></pre>
<pre><code>## v ggplot2 3.3.0     v purrr   0.3.3
## v tibble  3.0.1     v dplyr   0.8.3
## v tidyr   1.0.2     v stringr 1.4.0
## v readr   1.3.1     v forcats 0.4.0</code></pre>
<pre><code>## Warning: package &#39;ggplot2&#39; was built under R version 3.5.3</code></pre>
<pre><code>## Warning: package &#39;tibble&#39; was built under R version 3.5.3</code></pre>
<pre><code>## Warning: package &#39;tidyr&#39; was built under R version 3.5.3</code></pre>
<pre><code>## Warning: package &#39;purrr&#39; was built under R version 3.5.3</code></pre>
<pre><code>## Warning: package &#39;dplyr&#39; was built under R version 3.5.3</code></pre>
<pre><code>## -- Conflicts ----------------------------------------------- tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>library(janitor)</code></pre>
<pre><code>## Warning: package &#39;janitor&#39; was built under R version 3.5.3</code></pre>
<pre><code>## 
## Attaching package: &#39;janitor&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     chisq.test, fisher.test</code></pre>
<pre class="r"><code>####   NO RUN, JUST DATA WRANGLING ### 
superficie_km2&lt;-read.dbf(&quot;C:/Users/LENOVO/Desktop/s5/areas.dbf&quot;)%&gt;%
  select(area,clave)%&gt;%
  rename(area_km2=area)

saveRDS(superficie_km2, &quot;superficie_km2.rds&quot;)

b&lt;-read.csv(&quot;C:/Users/LENOVO/Desktop/s5/pozos_count08.csv&quot;)%&gt;%
  rename(concesiones=total)%&gt;%
  select(-X)%&gt;%
  mutate(clave=as.factor(clave))



c&lt;-read.csv(&quot;C:/Users/LENOVO/Desktop/s5/volumen_cons08.csv&quot;)

volumen&lt;-c%&gt;%select(LONGITUDE,LATITUDE,CVE_ACUHOM,VOL_CONS)%&gt;%
  clean_names()%&gt;%
  rename(clave=cve_acuhom,vol_cons_m3=vol_cons)

saveRDS(volumen,&quot;volumen.rds&quot;)

## Código para determinar concesiones por acuífero. 

concesiones&lt;-volumen%&gt;%na.omit%&gt;%
  group_by(clave)%&gt;%
  count()%&gt;%
  rename(pozos=n)

saveRDS(concesiones,&quot;concesiones.rds&quot;)
### Para estimar LQ hacer join de superficie_km2 y concesiones por clave. </code></pre>
<pre class="r"><code>### Para estimar LQ hacer join de superficie_km2 y concesiones por clave. 

sup&lt;-readRDS(&quot;superficie_km2.rds&quot;)

vol&lt;-readRDS(&quot;volumen.rds&quot;)
# 1 EDA. Explorar bases de datos:  superficie y volumen. Descriptive stats. 
# 2 Obtener base de concesiones por acuifero a partir de base de volumen. 

## Código para determinar concesiones por acuífero. 

# concesiones&lt;-volumen%&gt;%na.omit%&gt;%
  #group_by(clave)%&gt;%
  #count()%&gt;%
  #rename(pozos=n)

# 3 Estimar LQ de pozos por km para cada acuófero: 
# 3.1 El numerador del LQ será la proporción de concesines entre la superficie del acuifero.
# 3.2  El denominador será la proporción de la suma de concesiones en el estado respecto a la suma de la superficie de todos los acuiferos del estado. 

## LQ: se estima como el cociente entre 3.1 y 3.2. 

# 4 Hacer representación gráfica con scatter y línea de referencia para nievel de concentración  estatal (ej LQ =1). </code></pre>
<p>Base de datos <strong>A</strong></p>
</div>
</div>
